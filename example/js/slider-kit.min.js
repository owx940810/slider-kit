"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var kit={sliders:[]},Sliderkit=function(){function e(){var t=this;_classCallCheck(this,e),setTimeout(function(){t.getElements(),t.init()},200)}return _createClass(e,[{key:"getElements",value:function(){if(kit.sliders=_toConsumableArray(document.querySelectorAll(".slider-kit")).map(function(t,e){var n=t.querySelector(".slider-wrapper");if(!n)throw new Error("couldn't find slider-wrapper in slider-kit no.".concat(e));var i=n.querySelector(".slider-items");if(!i)throw new Error("couldn't find slider-items in slider-kit no.".concat(e));var r=n.querySelectorAll(".slider-item");if(r.length<0)throw new Error("couldn't find slider-item in slider-kit no.".concat(e));var a=n.querySelector("button.slider-button-left"),o=n.querySelector("button.slider-button-right"),s={};a&&o&&(s={left:a,right:o});var l=n.querySelector(".slider-paginations");return l&&_toConsumableArray(r).map(function(t,e){var n=document.createElement("div");n.classList.add("slider-page"),0===e&&n.classList.add("active"),l.appendChild(n)}),{ele:t,wrapper:n,itemsWrapper:i,items:r,width:r[0].offsetWidth,max:r.length-1,position:0,end:0,index:0,maxposition:0,state:{touch:!1,movement:!1},startX:0,startY:0,button:s,paginations:l}}),kit.sliders.length<=0)throw new Error("no slider-kit found")}},{key:"setEventListeners",value:function(e){var n=this;0<=navigator.userAgent.toLocaleLowerCase().indexOf("mobile")?(e.ele.addEventListener("touchstart",function(t){return n.start(t,e)},{passive:!1}),window.addEventListener("touchmove",function(t){return n.move(t,e)},{passive:!1}),window.addEventListener("touchend",function(t){return n.end(t,e)},{passive:!1})):(e.ele.addEventListener("mousedown",function(t){return n.start(t,e)}),window.addEventListener("mousemove",function(t){return n.move(t,e)}),window.addEventListener("mouseup",function(t){return n.end(t,e)})),_toConsumableArray(e.items).map(function(t){t.addEventListener("click",function(t){0<=e.itemsWrapper.style.cssText.indexOf("transition")&&t.preventDefault()})})}},{key:"init",value:function(){var i=this;kit.sliders.map(function(n){var t=window.getComputedStyle(n.items[0])["margin-left"];t&&(n.width+=parseInt(t.substring(0,t.length-2)));var e=window.getComputedStyle(n.items[0])["margin-right"];e&&(n.width+=parseInt(e.substring(0,e.length-2))),n.max*n.width>n.wrapper.offsetWidth&&(n.maxposition=n.max*n.width-(n.wrapper.offsetWidth-n.width)),i.setEventListeners(n),n.button.left&&n.button.left.addEventListener("click",function(){n.index--,i.bounce(n,n.index)}),n.button.right&&n.button.right.addEventListener("click",function(){n.index++,i.bounce(n,n.index)}),n.paginations&&_toConsumableArray(n.paginations.children).map(function(t,e){t.addEventListener("click",function(){i.bounce(n,e),i.setPagination(n,e)})})})}},{key:"start",value:function(t,e){"button"===t.target.tagName||t.target.classList.contains("slider-page")?t.preventDefault():(e.state.touch=!0,e.itemsWrapper.style.transition="",e.state.movement=!1,e.startX=t.clientX||t.touches[0].clientX,"touchstart"===t.type&&(e.startY=t.touches[0].clientY))}},{key:"move",value:function(t,e){if(e.state.touch){var n=t.clientX||t.touches[0].clientX;if(!e.state.movement){var i=0;if("touchmove"===t.type&&(i=t.touches[0].clientY),i&&Math.abs(i-e.startY)>Math.abs(n-e.startX))return e.state.movement=!1,void(e.state.touch=!1)}t.preventDefault(),e.state.movement=!0,e.position=e.end-e.startX+n,e.itemsWrapper.style.transform="translateX(".concat(e.position,"px)")}}},{key:"end",value:function(t,e){e.state.touch&&(e.state.movement&&t.preventDefault(),Math.floor(e.position)!==Math.floor(e.end)?(e.state.touch=!1,this.bounce(e)):e.state.touch=!1)}},{key:"setPagination",value:function(t,e){t.paginations&&(t.paginations.querySelector(".active").classList.remove("active"),t.paginations.children[e].classList.add("active"))}},{key:"bounce",value:function(t,e){t.index=void 0===e?-Math.round(t.position/t.width):e,t.itemsWrapper.style.transition="transform 250ms ease-in-out",t.index<0&&(t.index=0),t.index>=t.max&&(t.index=t.max);var n=-t.index*t.width;n<-t.maxposition&&(n=-t.maxposition),t.end=t.position=n,t.wrapper.dataset.sliderindex=t.index,t.itemsWrapper.style.transform="translateX(".concat(t.position,"px)"),this.setPagination(t,t.index)}}]),e}();